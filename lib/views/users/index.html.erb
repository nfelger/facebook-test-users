<% content_for :head do %>
  <link type="text/css" rel="stylesheet" href="/stylesheets/base.css">
<% end %>

<% content_for :body do %>
  <script>
  FB.init({
    appId:172214899505462, cookie:true,
    status:true, xfbml:true
  });
  FB.api('/me?fields=name,accounts', function(user) {
    if(user != null) {
      var image = document.getElementById('image');
      image.src = 'http://graph.facebook.com/' + user.id + '/picture';
      var name = document.getElementById('name');
      name.innerHTML = user.name;
    }
  });
  </script>
  <div align="center">
    <img id="image"/>
    <div id="name"></div>
  </div>
  <table>
    <caption>Facebook Test Accounts</caption>
    <colgroup>
      <col class="opengraph-id">
      <col class="email">
      <col class="password">
      <col class="access-token">
      <col class="login-url">
      <col class="delete">
    </colgroup>
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Email</th>
        <th scope="col">Password</th>
        <th scope="col">Access Token</th>
        <th scope="col">Login url</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      <% users.each_with_index do |user, index| %>
        <tr class="<%= (index % 2) == 0 ? "even" : "odd" %>">
          <td><%= user.open_graph_id %></td>
          <td><%= user.email %></td>
          <td><%= user.password %></td>
          <td class="access-token"><%= user.access_token %></td>
          <td class="login-url"><%= user.login_url %></td>
          <td>
            <form method="post" action="/users/<%= user.open_graph_id %>">
              <input name="_method" type="hidden" value="delete">
              <input src="/icons/delete.png" type="image" alt="Delete" value="Delete">
            </form>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>